try:
    import time
    from sys import __stdout__, stdout
    from threading import Thread
    from subprocess import *
    import os
    import sys
    import subprocess
    import threading
    import readline
    from termcolor import colored
except ImportError:
    print("\ncheck for prerequisities ")


def githubDorker(target):
    cmd = [
        'python3 ~/Tools/GitDorker/GitDorker.py -tf ~/Tools/.github_tokens -e 5 -q '+target +
        ' -p -ri -d ~/Tools/GitDorker/Dorks/medium_dorks.txt | grep "\[+\]" | grep "git" | anew -q osint/gitdorks.txt',
        'sed -r -i "s/\x1B\[([0-9]{1,3}(;[0-9]{1,2})?)?[mGK]//g" osint/gitdorks.txt'
    ]

    try:
        for c in cmd:
            proc = subprocess.run(
                c, shell=True, stderr=STDOUT, stdout=sys.stdout)
        if(proc.returncode != 0):
            print(colored('Step 1 Failed! Check/Update prerequisitie packages. \nError: ',
                          'blue', attrs=['bold']) + proc.stderr.rstrip())
            sys.exit(1)
        else:
            print(colored("[x] Executed", 'blue', attrs=['bold']))
    except:
        print("Something went wrong! Check prerequisities.\n")
    try:
        with open('osint/gitdorks.txt') as git:
            return git.read()
    except:
        return "An error occured, please try again!!"
