try:
    import time
    from sys import __stdout__, stdout
    from threading import Thread
    from subprocess import *
    import os
    import sys
    import subprocess
    import threading
    import readline
    from termcolor import colored
except ImportError:
    print("\ncheck for prerequisities ")


def scanXSS(target):
    os.system('clear')
    p = './output/xss/'
    xssStrike = '~/Tools/XSStrike/xsstrike.py'
    try:
        os.mkdir(p)
    except FileExistsError as exc:
        print(exc)

    delCMD = 'rm ' + p + 'output/xss/xss.txt'

    try:
        subprocess.run(delCMD, shell=True, stdout=PIPE)
    except:
        pass

    cmd = [
        'python3 ' + xssStrike + ' -u "' + target +
        '" --crawl --file-log-level INFO --log-file ' + p + 'xss.txt'
    ]

    try:
        print(cmd[0])
        proc = subprocess.run(cmd[0], shell=True, stderr=STDOUT, stdout=PIPE)
        if(proc.returncode != 0):
            print(colored('Step 1 Failed! Check/Update prerequisitie packages. \nError: ',
                          'blue', attrs=['bold']) + proc.stderr.rstrip())
            return False
        else:
            print(colored("[x] Executed", 'blue', attrs=['bold']))
            return True
    except:
        print("Something went wrong! Check prerequisities.\n")
        return False
